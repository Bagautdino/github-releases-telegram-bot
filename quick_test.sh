#!/bin/bash

echo "üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Ä–µ–ª–∏–∑–∞—Ö"
echo "======================================"

echo "1Ô∏è‚É£ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞..."
docker-compose down > /dev/null 2>&1

echo "2Ô∏è‚É£ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ LLM)..."
cp .env .env.backup 2>/dev/null || true
cp env.test .env

echo "3Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π..."
docker-compose up -d

echo "4Ô∏è‚É£ –ñ–¥—ë–º 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
sleep 5

echo "5Ô∏è‚É£ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å—Ç—Ä–æ–∫..."
docker-compose logs --tail=10

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å:"
echo "   ‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: /setchat -4820464052"
echo "   ‚Ä¢ –ó–∞—Ç–µ–º: /addtestrepo"  
echo "   ‚Ä¢ –ò –Ω–∞–∫–æ–Ω–µ—Ü: /forcecheck"
echo ""
echo "üì± –í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–ª–∏–∑–∞—Ö!"
echo ""
echo "üìä –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:"
echo "   docker-compose logs -f"
echo ""
echo "üîÑ –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:"
echo "   cp .env.backup .env && docker-compose restart"
